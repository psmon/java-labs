services:
  kafka-ui:
    image: provectuslabs/kafka-ui
    environment:
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka-1:29092,kafka-2:29093,kafka-3:29094
      KAFKA_CLUSTERS_0_NAME: 127.0.0.1
      KAFKA_CLUSTERS_0_ZOOKEEPER: zookeeper-1:22181
    ports:
      - 8989:8080/tcp
  zookeeper-1:
    image: confluentinc/cp-zookeeper:5.5.1
    environment:
      ZOOKEEPER_CLIENT_PORT: '32181'
      ZOOKEEPER_TICK_TIME: '2000'
    ports:
      - 32181:32181/tcp
  kafka-1:
    image: confluentinc/cp-kafka:5.5.1
    environment:
      KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka-1:29092,EXTERNAL://127.0.0.1:9092
      KAFKA_BROKER_ID: '1'
      KAFKA_DEFAULT_REPLICATION_FACTOR: '3'
      KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT
      KAFKA_NUM_PARTITIONS: '3'
      KAFKA_ZOOKEEPER_CONNECT: zookeeper-1:32181
    ports:
      - 9092:9092/tcp
  kafka-2:
    image: confluentinc/cp-kafka:5.5.1
    environment:
      KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka-2:29093,EXTERNAL://127.0.0.1:9093
      KAFKA_BROKER_ID: '2'
      KAFKA_DEFAULT_REPLICATION_FACTOR: '3'
      KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT
      KAFKA_NUM_PARTITIONS: '3'
      KAFKA_ZOOKEEPER_CONNECT: zookeeper-1:32181
    ports:
      - 9093:9093/tcp
  kafka-3:
    image: confluentinc/cp-kafka:5.5.1
    environment:
      KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka-3:29094,EXTERNAL://127.0.0.1:9094
      KAFKA_BROKER_ID: '3'
      KAFKA_DEFAULT_REPLICATION_FACTOR: '3'
      KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT
      KAFKA_NUM_PARTITIONS: '3'
      KAFKA_ZOOKEEPER_CONNECT: zookeeper-1:32181
    ports:
      - 9094:9094/tcp